MIT APP INVENTOR - BLOCKS KODU (PSEUDO-CODE)
================================================

Bu dosya, MIT App Inventor'da oluÅŸturulacak blocks'larÄ±n detaylÄ± pseudo-code halini iÃ§erir.
Her blok, App Inventor'da sÃ¼rÃ¼kle-bÄ±rak yÃ¶ntemiyle oluÅŸturulacaktÄ±r.

================================================
1. GLOBAL DEÄžÄ°ÅžKENLER
================================================

initialize global hizMS to 0
initialize global hizKMH to 0
initialize global toplamMesafe to 0
initialize global eskiLat to 0
initialize global eskiLon to 0
initialize global bluetoothAdres to ""

================================================
2. SCREEN INITIALIZE
================================================

when Screen1.Initialize
do
  set Label_Durum.Text to "Bluetooth: BaÄŸlÄ± DeÄŸil"
  set Label_Durum.TextColor to COLOR_RED
  set Label_Hiz.Text to "HÄ±z: 0.0 km/h"
  set Label_Mesafe.Text to "Mesafe: 0.00 km"
  set Label_GPS.Text to "GPS: Konum bekleniyor..."
  set Clock1.TimerEnabled to false
  set Button_BaglantiyiKes.Visible to false

================================================
3. BLUETOOTH CÄ°HAZ SEÃ‡Ä°MÄ°
================================================

when Button_BluetoothSec.Click
do
  set ListPicker_Cihazlar.Elements to BluetoothClient1.AddressesAndNames
  call ListPicker_Cihazlar.Open

---

when ListPicker_Cihazlar.AfterPicking
do
  // MAC adresini al (format: "AA:BB:CC:DD:EE:FF DeviceName")
  set global bluetoothAdres to (
    select list item
      list: ListPicker_Cihazlar.Selection
      index: 1
  )
  set Label_Durum.Text to join(
    "SeÃ§ildi: ",
    ListPicker_Cihazlar.SelectionIndex
  )

================================================
4. BLUETOOTH BAÄžLANTISI
================================================

when Button_Baglan.Click
do
  if BluetoothClient1.IsConnected
  then
    set Label_Durum.Text to "Zaten baÄŸlÄ±!"
  else
    if call BluetoothClient1.Connect(address: global bluetoothAdres)
    then
      // BaÅŸarÄ±lÄ± baÄŸlantÄ±
      set Label_Durum.Text to "Bluetooth: BaÄŸlÄ± âœ“"
      set Label_Durum.TextColor to COLOR_GREEN
      set Button_Baglan.Visible to false
      set Button_BaglantiyiKes.Visible to true
      set Clock1.TimerEnabled to true
    else
      // BaÄŸlantÄ± hatasÄ±
      set Label_Durum.Text to "BaÄŸlantÄ± HatasÄ±!"
      call Notifier1.ShowAlert(
        message: "HC-05'e baÄŸlanÄ±lamadÄ±. CihazÄ±n aÃ§Ä±k ve eÅŸleÅŸtirilmiÅŸ olduÄŸundan emin olun."
      )

---

when Button_BaglantiyiKes.Click
do
  call BluetoothClient1.Disconnect
  set Label_Durum.Text to "Bluetooth: BaÄŸlÄ± DeÄŸil"
  set Label_Durum.TextColor to COLOR_RED
  set Button_Baglan.Visible to true
  set Button_BaglantiyiKes.Visible to false
  set Clock1.TimerEnabled to false

================================================
5. GPS VERÄ° ALMA VE Ä°ÅžLEME
================================================

when LocationSensor1.LocationChanged(
  latitude,
  longitude,
  altitude,
  speed
)
do
  // HÄ±z hesaplama (m/s â†’ km/h)
  set global hizMS to LocationSensor1.CurrentSpeed
  
  if (global hizMS â‰¥ 0)
  then
    set global hizKMH to (global hizMS Ã— 3.6)
    
    // 2 ondalÄ±k basamak
    set global hizKMH to (
      round(global hizKMH Ã— 100) / 100
    )
    
    // Mesafe hesaplama
    if (global eskiLat â‰  0)
    then
      call MesafeHesapla
    
    // Eski koordinatlarÄ± kaydet
    set global eskiLat to latitude
    set global eskiLon to longitude
    
    // EkranÄ± gÃ¼ncelle
    set Label_Hiz.Text to join(
      "HÄ±z: ",
      global hizKMH,
      " km/h"
    )
    
    set Label_Mesafe.Text to join(
      "Mesafe: ",
      round(global toplamMesafe Ã— 100) / 100,
      " km"
    )
    
    set Label_GPS.Text to join(
      "GPS: ",
      round(latitude Ã— 1000) / 1000,
      ", ",
      round(longitude Ã— 1000) / 1000
    )

================================================
6. MESAFE HESAPLAMA PROCEDURE
================================================

procedure MesafeHesapla
do
  // LocationSensor.DistanceTo ile Haversine mesafesi (metre)
  initialize local mesafeM to (
    call LocationSensor1.DistanceTo(
      latitude1: global eskiLat,
      longitude1: global eskiLon,
      latitude2: LocationSensor1.Latitude,
      longitude2: LocationSensor1.Longitude
    )
  )
  
  // Metre â†’ Kilometre
  set global toplamMesafe to (
    global toplamMesafe + (mesafeM / 1000)
  )

================================================
7. BLUETOOTH VERÄ° GÃ–NDERÄ°MÄ°
================================================

when Clock1.Timer
do
  if (BluetoothClient1.IsConnected and Switch_OtomatikGonder.Checked)
  then
    // Veri formatÄ±: SPEED:45.50,DIST:1.32\n
    initialize local veriMetni to join(
      "SPEED:",
      round(global hizKMH Ã— 100) / 100,
      ",DIST:",
      round(global toplamMesafe Ã— 100) / 100,
      "\n"
    )
    
    // Bluetooth'a gÃ¶nder
    call BluetoothClient1.SendText(
      text: veriMetni
    )

================================================
8. GPS DURUM TAKÄ°BÄ°
================================================

when LocationSensor1.StatusChanged(
  provider,
  status
)
do
  if (status = "Available")
  then
    set Label_GPS.Text to "GPS: HazÄ±r âœ“"
    set Label_GPS.TextColor to COLOR_GREEN
  else if (status = "Out of Service")
  then
    set Label_GPS.Text to "GPS: Sinyal Yok âœ—"
    set Label_GPS.TextColor to COLOR_RED
  else if (status = "Temporarily Unavailable")
  then
    set Label_GPS.Text to "GPS: Bekleniyor..."
    set Label_GPS.TextColor to COLOR_ORANGE

================================================
9. EK Ã–ZELLÄ°KLER (OPSÄ°YONEL)
================================================

// Mesafe SÄ±fÄ±rlama
when Button_MesafeSifirla.Click
do
  set global toplamMesafe to 0
  set global eskiLat to 0
  set global eskiLon to 0
  set Label_Mesafe.Text to "Mesafe: 0.00 km"

---

// HÄ±z Limiti UyarÄ±sÄ±
when LocationSensor1.LocationChanged
do
  // ... (normal kodlar)
  
  if (global hizKMH > 50)
  then
    call Notifier1.ShowAlert(
      message: "âš  DÄ°KKAT: HÄ±z limiti aÅŸÄ±ldÄ±!"
    )

================================================
10. YARDIMCI FONKSÄ°YONLAR
================================================

// VirgÃ¼lden sonra N basamak
procedure YuvarlaOndalik(sayi, basamak)
do
  initialize local carpan to (10 ^ basamak)
  return (round(sayi Ã— carpan) / carpan)

---

// Bluetooth baÄŸlantÄ± durumu kontrolÃ¼
procedure BluetoothBagliMi
do
  return BluetoothClient1.IsConnected

================================================
11. RENK KODLARI
================================================

COLOR_RED = -12627531
COLOR_GREEN = -14503604
COLOR_BLUE = -16537100
COLOR_ORANGE = -30464
COLOR_GRAY = -7829368

Bu kodlarÄ± Label.TextColor veya Button.BackgroundColor iÃ§in kullanabilirsiniz.

================================================
12. BÄ°LEÅžEN Ã–ZELLÄ°KLERÄ°
================================================

LocationSensor1:
  TimeInterval: 1000 ms
  DistanceInterval: 0 m
  Enabled: true

Clock1:
  TimerInterval: 1000 ms
  TimerEnabled: false (baÅŸlangÄ±Ã§ta)

BluetoothClient1:
  (Otomatik ayarlar)

================================================
13. VERÄ° AKIÅžI ÅžEMASÄ°
================================================

KULLANICI
   â†“
[Bluetooth Cihaz SeÃ§] â†’ ListPicker â†’ MAC Adres Kaydet
   â†“
[BaÄŸlan] â†’ BluetoothClient.Connect
   â†“
GPS SÄ°NYALÄ°
   â†“
LocationSensor.LocationChanged
   â†“
HÄ±z Hesapla (m/s Ã— 3.6)
   â†“
Mesafe Hesapla (Haversine)
   â†“
Clock1.Timer (her 1 saniye)
   â†“
Bluetooth GÃ¶nder: "SPEED:X,DIST:Y\n"
   â†“
ARDUINO HC-05
   â†“
LCD EKRAN

================================================
14. HATA AYIKLAMA Ä°PUÃ‡LARI
================================================

1. Blocks'da kÄ±rmÄ±zÄ± Ã¼nlem iÅŸareti varsa hata var demektir
2. Test ederken Serial Monitor kullanÄ±n
3. Label_Durum ile baÄŸlantÄ± durumunu takip edin
4. GPS test iÃ§in Mock Locations kullanÄ±n
5. Bluetooth baÄŸlantÄ±sÄ± kesilirse otomatik yeniden baÄŸlanma ekleyin:

when Clock2.Timer
do
  if (not BluetoothClient1.IsConnected)
  then
    if (global bluetoothAdres â‰  "")
    then
      call BluetoothClient1.Connect(address: global bluetoothAdres)

================================================
15. PERFORMANS OPTÄ°MÄ°ZASYONU
================================================

- Clock1.TimerInterval'i 500 ms'ye dÃ¼ÅŸÃ¼rÃ¼lebilir (daha hÄ±zlÄ± veri)
- LocationSensor.TimeInterval'i 2000 ms'ye Ã§Ä±karabilirsiniz (batarya tasarrufu)
- String join yerine make text kullanÄ±n (daha hÄ±zlÄ±)
- Gereksiz round iÅŸlemlerini azaltÄ±n

================================================

Not: Bu pseudo-code'u MIT App Inventor'da block'lara dÃ¶nÃ¼ÅŸtÃ¼rÃ¼rken:
1. Her satÄ±r bir block'a karÅŸÄ±lÄ±k gelir
2. "join" â†’ Text blocks
3. "round", "Ã—", "/" â†’ Math blocks
4. "if-then-else" â†’ Control blocks
5. "call" â†’ Component method blocks
6. "set" â†’ Variable blocks

BaÅŸarÄ±lar! ðŸš€
